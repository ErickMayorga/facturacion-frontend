<!-- CHECKBOX -->
<div *ngIf="type === 'checkbox'">
  <div [formGroup]="formGroup" class="input-field">
    <p>
      <label>
        <input type="checkbox" class="filled-in" checked="checked" formControlName="{{nameField}}"/>
        <span>{{title}}</span>
      </label>
    </p>
    <div *ngIf="formGroup.get(nameField)">
      <span *ngIf="formGroup.get(nameField)?.valid || !formGroup.get(nameField)?.touched" class="helper-text">{{helpText}}</span>
      <span *ngIf="
             (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             formGroup.get(nameField)?.dirty &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength') ||
            formGroup.get(nameField)?.hasError('email'))) ||

            (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength') ||
            formGroup.get(nameField)?.hasError('email')))"
            class="helper-text" style="color: var(--error)">
      {{requiredMessage}}
      </span>
      <span *ngIf="formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength')"
              class="helper-text" style="color: var(--error)">
        {{lengthMessage}}
      </span>
      <span *ngIf="formGroup.get(nameField)?.hasError('email')"
            class="helper-text" style="color: var(--error)">
        El correo electrónico no es válido
      </span>
    </div>
  </div>
</div>

<!-- SELECT -->
<div *ngIf="type === 'select'">
  <div [formGroup]="formGroup" class="input-field col s12">
    <label>{{title}}</label><br><br>
    <select class="form-select" formControlName="{{nameField}}">
      <option *ngFor="let option of options" value="{{option}}">{{option}}</option>
    </select>
    <div *ngIf="formGroup.get(nameField)">
      <span *ngIf="formGroup.get(nameField)?.valid || !formGroup.get(nameField)?.touched" class="helper-text">{{helpText}}</span>
      <span *ngIf="
               (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             formGroup.get(nameField)?.dirty &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength'))) ||

            (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength')))"
            class="helper-text" style="color: var(--error)">
        {{requiredMessage}}
        </span>
      <span *ngIf="formGroup.get(nameField)?.hasError('minlength') ||
              formGroup.get(nameField)?.hasError('maxlength')"
            class="helper-text" style="color: var(--error)">
          {{lengthMessage}}
        </span>
    </div>
  </div>
</div>

<!-- TEXT, NUMBER, ETC -->
<div *ngIf="type != 'checkbox' && type != 'select'">
  <div [formGroup]="formGroup" class="input-field">
    <input id="{{nameField}}" type="{{type === 'float'?'number':type}}" min="0" step="{{type === 'float' ? 0.01:1}}" class="validate" formControlName="{{nameField}}">
    <label for="{{nameField}}" class="active">{{title}}</label>
    <div *ngIf="formGroup.get(nameField)">
      <span *ngIf="formGroup.get(nameField)?.valid ||
      !formGroup.get(nameField)?.touched"
            class="helper-text">
        {{helpText}}
      </span>
      <span *ngIf="
             (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             formGroup.get(nameField)?.dirty &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength'))) ||

            (formGroup.get(nameField)?.invalid &&
             formGroup.get(nameField)?.touched &&
             !(formGroup.get(nameField)?.hasError('minlength') ||
            formGroup.get(nameField)?.hasError('maxlength')))"
            class="helper-text" style="color: var(--error)">
      {{requiredMessage}}
    </span>
      <span *ngIf="formGroup.get(nameField)?.hasError('minlength') ||
          formGroup.get(nameField)?.hasError('maxlength')"
            class="helper-text" style="color: var(--error)">
      {{lengthMessage}}
    </span>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    M.updateTextFields()
  });
</script>
